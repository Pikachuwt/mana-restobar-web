<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Man√° Restobar - Pamplona</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Estilos para el PDF */
        .pdf-container {
            width: 100%;
            max-width: 900px;
            margin: 30px auto;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            background: white;
            min-height: 600px;
        }
        
        .pdf-viewer {
            width: 100%;
            height: 700px;
            border: none;
        }
        
        /* Responsive para PDF */
        @media (max-width: 768px) {
            .pdf-viewer {
                height: 500px;
            }
        }
        
        @media (max-width: 480px) {
            .pdf-viewer {
                height: 400px;
            }
        }
        
        /* Estilos para notificaciones */
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            max-width: 350px;
        }
        
        .notification {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border-left: 4px solid #3498db;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideIn 0.3s ease;
        }
        
        .notification.success {
            border-left-color: #2ecc71;
        }
        
        .notification.error {
            border-left-color: #e74c3c;
        }
        
        .notification.info {
            border-left-color: #3498db;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <!-- Header con fondo borroso -->
    <header class="header" id="mainHeader">
        <div class="container">
            <div class="logo">
                <img src="images/Logo.png.jpeg" alt="Man√° Restobar" style="max-height: 60px;">
            </div>
            <nav class="nav">
                <ul>
                    <li><a href="#" class="nav-link active" onclick="showSection('inicio-section'); return false;">Inicio</a></li>
                    <li><a href="#" class="nav-link" onclick="showSection('menu-section'); return false;">Men√∫</a></li>
                    <li><a href="#" class="nav-link" onclick="showSection('arma-almuerzo-section'); return false;">Arma tu Almuerzo</a></li>
                    <li><a href="#" class="nav-link" onclick="showSection('reservas-section'); return false;">Reservas</a></li>
                </ul>
            </nav>
            <div class="social-icons">
                <a href="https://www.facebook.com/profile.php?id=61572704497545" target="_blank" class="social-icon">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="https://www.instagram.com/mana_coffee_pam" target="_blank" class="social-icon">
                    <i class="fab fa-instagram"></i>
                </a>
            </div>
        </div>
    </header>

    <!-- Contenido din√°mico -->
    <main id="content">
        <!-- Secci√≥n INICIO -->
        <section id="inicio-section" class="section active">
            <div class="hero">
                <div class="container">
                    <h1>Bienvenido a Man√° Restobar</h1>
                    <p>El coraz√≥n de Pamplona donde cada taza de caf√© y cada plato se sirve con amor familiar.</p>
                    <div class="hero-buttons">
                        <a href="#" class="btn" onclick="showSection('menu-section'); return false;">Ver Men√∫</a>
                        <a href="#" class="btn btn-secondary" onclick="showSection('reservas-section'); return false;">Reservar Mesa</a>
                    </div>
                </div>
            </div>

            <div class="container">
                <!-- Historia -->
                <div class="historia-section">
                    <h2>Nuestra Historia</h2>
                    <div class="historia-content" id="historia-dinamica">
                        <p>Cargando historia...</p>
                    </div>
                </div>

                <div class="galeria-section">
                    <h2>Un Vistazo a Nuestro Sabor</h2>
                    <p class="subtitle">Explora la variedad y calidad que nos caracteriza en cada plato que servimos.</p>
                    
                    <div class="collage-grid">
                        <!-- Collage de im√°genes de nuestras comidas -->
                        <div class="collage-item">
                            <img src="images/comida1.jpg" alt="Plato especial del restaurante" loading="lazy" onerror="this.style.display='none'">
                        </div>
                        <div class="collage-item">
                            <img src="images/comida2.jpg" alt="Plato gourmet" loading="lazy" onerror="this.style.display='none'">
                        </div>
                        <div class="collage-item">
                            <img src="images/comida3.jpeg" alt="Especialidad de la casa" loading="lazy" onerror="this.style.display='none'">
                        </div>
                        <div class="collage-item">
                            <img src="images/comida4.jpeg" alt="Men√∫ ejecutivo" loading="lazy" onerror="this.style.display='none'">
                        </div>
                        <div class="collage-item">
                            <img src="images/comida5.jpeg" alt="Plato tradicional" loading="lazy" onerror="this.style.display='none'">
                        </div>
                        <div class="collage-item">
                            <img src="images/comida6.jpeg" alt="Especialidad culinaria" loading="lazy" onerror="this.style.display='none'">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Secci√≥n MEN√ö -->
        <!-- Secci√≥n MEN√ö -->
<section id="menu-section" class="section">
    <div class="container">
        <h2 class="section-title">Nuestro Men√∫</h2>
        
        <!-- Contenedor del PDF optimizado -->
        <div class="pdf-container">
            <div class="pdf-actions" style="text-align: center; margin-bottom: 20px;">
                <a href="images/menu-actual.pdf" download class="btn" style="margin-right: 10px;">
                    <i class="fas fa-download"></i> Descargar Men√∫
                </a>
                <a href="images/menu-actual.pdf" target="_blank" class="btn btn-secondary">
                    <i class="fas fa-external-link-alt"></i> Abrir en nueva pesta√±a
                </a>
            </div>
            
            <iframe 
                src="images/menu-actual.pdf#view=FitH&toolbar=0&navpanes=0" 
                class="pdf-viewer" 
                title="Men√∫ Man√° Restobar"
                id="pdf-frame"
                loading="lazy">
                <p style="text-align: center; padding: 40px;">
                    Tu navegador no puede mostrar el PDF. 
                    <a href="images/menu-actual.pdf" download style="color: #d4af37; font-weight: bold;">
                        Descarga el men√∫ aqu√≠
                    </a>
                </p>
            </iframe>
        </div>
        
        <!-- Informaci√≥n adicional del men√∫ -->
        <div class="menu-types" style="margin-top: 40px;">
            <div class="menu-type-card">
                <h3>Men√∫ Ejecutivo</h3>
                <p class="price">$15.000</p>
                <p class="desc">Cambia todos los d√≠as</p>
            </div>
            <div class="menu-type-card">
                <h3>Men√∫ Especial</h3>
                <p class="price">$20.000</p>
                <p class="desc">Cambia todos los d√≠as</p>
            </div>
        </div>
    </div>
</section>


        <!-- Secci√≥n ARMA TU ALMUERZO -->
        <section id="arma-almuerzo-section" class="section">
            <div class="container">
                <h2 class="section-title">Arma tu Almuerzo</h2>
                
                <div class="build-lunch-container-new">
                    <!-- Parte izquierda - Opciones -->
                    <div class="options-side">
                        <div class="options-grid-simple">
                            <div class="option-card" data-name="Arroz" data-price="4000">
                                <div class="option-icon">üçö</div>
                                <div class="option-details">
                                    <h3 class="option-title">Arroz</h3>
                                    <p class="option-price">$4.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Papas a la Francesa" data-price="5200">
                                <div class="option-icon">üçü</div>
                                <div class="option-details">
                                    <h3 class="option-title">Papas a la Francesa</h3>
                                    <p class="option-price">$5.200</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Carnes (Res, Cerdo o Pechuga)" data-price="8900">
                                <div class="option-icon">ü•©</div>
                                <div class="option-details">
                                    <h3 class="option-title">Carnes</h3>
                                    <p class="option-subtitle">Res, Cerdo o Pechuga</p>
                                    <p class="option-price">$8.900</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Sopa de d√≠a" data-price="5000">
                                <div class="option-icon">ü•£</div>
                                <div class="option-details">
                                    <h3 class="option-title">Sopa de d√≠a</h3>
                                    <p class="option-price">$5.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Tajadas de Maduro" data-price="3000">
                                <div class="option-icon">üçå</div>
                                <div class="option-details">
                                    <h3 class="option-title">Tajadas de Maduro</h3>
                                    <p class="option-price">$3.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Ma√≠z" data-price="3000">
                                <div class="option-icon">üåΩ</div>
                                <div class="option-details">
                                    <h3 class="option-title">Ma√≠z</h3>
                                    <p class="option-price">$3.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Tocineta" data-price="3000">
                                <div class="option-icon">ü•ì</div>
                                <div class="option-details">
                                    <h3 class="option-title">Tocineta</h3>
                                    <p class="option-price">$3.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Ensalada del d√≠a" data-price="3200">
                                <div class="option-icon">ü•ó</div>
                                <div class="option-details">
                                    <h3 class="option-title">Ensalada del d√≠a</h3>
                                    <p class="option-price">$3.200</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Huevo" data-price="3000">
                                <div class="option-icon">ü•ö</div>
                                <div class="option-details">
                                    <h3 class="option-title">Huevo</h3>
                                    <p class="option-price">$3.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Queso" data-price="3500">
                                <div class="option-icon">üßÄ</div>
                                <div class="option-details">
                                    <h3 class="option-title">Queso</h3>
                                    <p class="option-price">$3.500</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Chorizo" data-price="4000">
                                <div class="option-icon">üå≠</div>
                                <div class="option-details">
                                    <h3 class="option-title">Chorizo</h3>
                                    <p class="option-price">$4.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Salchicha" data-price="3000">
                                <div class="option-icon">üå≠</div>
                                <div class="option-details">
                                    <h3 class="option-title">Salchicha</h3>
                                    <p class="option-price">$3.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Granos del d√≠a" data-price="4000">
                                <div class="option-icon">ü´ò</div>
                                <div class="option-details">
                                    <h3 class="option-title">Granos del d√≠a</h3>
                                    <p class="option-price">$4.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Patacones" data-price="6500">
                                <div class="option-icon">üçå</div>
                                <div class="option-details">
                                    <h3 class="option-title">Patacones</h3>
                                    <p class="option-price">$6.500</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Papas locas" data-price="9900">
                                <div class="option-icon">üçü</div>
                                <div class="option-details">
                                    <h3 class="option-title">Papas locas</h3>
                                    <p class="option-price">$9.900</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="note-box">
                            <div class="note-icon">‚ÑπÔ∏è</div>
                            <p class="note-text">Todo pedido para llevar tiene un costo adicional de $1.000</p>
                        </div>
                    </div>
                    
                    <!-- Parte derecha - Resumen -->
                    <div class="summary-side">
                        <div class="summary-card">
                            <div class="summary-header">
                                <h3 class="summary-title">Tu Pedido</h3>
                                <p class="summary-subtitle">Resumen de tu almuerzo personalizado</p>
                            </div>
                            
                            <div class="selected-items-container" id="selectedItems">
                                <div class="empty-state">
                                    <div class="empty-icon">üìù</div>
                                    <p class="empty-text">Selecciona los √≠tems de tu almuerzo</p>
                                </div>
                            </div>
                            
                            <div class="takeout-option">
                                <label class="takeout-label">
                                    <input type="checkbox" id="paraLlevar" value="1000">
                                    <span class="custom-checkbox"></span>
                                    <span class="takeout-text">Para Llevar (Costo Adicional)</span>
                                    <span class="takeout-price">+ $1.000</span>
                                </label>
                            </div>
                            
                            <div class="total-box">
                                <div class="total-content">
                                    <span class="total-label">Total:</span>
                                    <span class="total-amount" id="totalAmount">$0</span>
                                </div>
                            </div>
                            
                            <button class="btn btn-whatsapp-full" id="sendOrderBtn">
                                <i class="fab fa-whatsapp"></i> Enviar Pedido a WhatsApp
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Secci√≥n RESERVAS -->
        <section id="reservas-section" class="section">
            <div class="container">
                <h2 class="section-title">Reservas</h2>
                
                <div class="reservas-container">
                    <div class="reserva-intro">
                        <p>Asegura tu mesa en Man√° Restobar. Completa el formulario para enviarnos los detalles por WhatsApp.</p>
                    </div>
                    
                    <div class="reserva-form-card">
                        <h3>Reserva tu Mesa</h3>
                        <p class="form-subtitle">Completa tus datos y haz clic en el bot√≥n para coordinar tu reserva con nosotros.</p>
                        
                        <form id="reservaForm" class="reserva-form">
                            <div class="form-group-row">
                                <div class="form-group">
                                    <label for="personas">N√∫mero de personas</label>
                                    <input type="number" id="personas" placeholder="Ej: 4" min="1" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="hora">Hora</label>
                                    <input type="time" id="hora" required>
                                </div>
                            </div>
                            
                            <div class="form-group-row">
                                <div class="form-group">
                                    <label for="fecha">Fecha</label>
                                    <input type="date" id="fecha" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="plato">Plato (opcional)</label>
                                    <input type="text" id="plato" placeholder="Ej: Lasa√±a de vegetales">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="observaciones">Observaciones adicionales</label>
                                <textarea id="observaciones" rows="3" placeholder="Alguna solicitud especial..."></textarea>
                            </div>
                            
                            <button type="submit" class="btn btn-whatsapp-full">
                                <i class="fab fa-whatsapp"></i> Reservar por WhatsApp
                            </button>
                        </form>
                    </div>
                    
                    <div class="politicas-container">
                        <h3>Pol√≠tica de Reservas</h3>
                        <div class="politicas-list">
                            <div class="politica-item">
                                <h4>Cancelaci√≥n</h4>
                                <p>Se puede cancelar sin costo hasta 2 d√≠as antes de la fecha de la reserva.</p>
                            </div>
                            <div class="politica-item">
                                <h4>Modificaci√≥n</h4>
                                <p>Se puede modificar la reserva hasta 8 horas antes.</p>
                            </div>
                            <div class="politica-item">
                                <h4>Abono</h4>
                                <p>Para eventos o platos especiales, se podr√≠a requerir un abono del 10% o 15% (configurable).</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pagos-container">
                        <h3>Medios de Pago</h3>
                        <div class="pago-methods">
                            <div class="pago-method">
                                <h4>BANCOLOMBIA</h4>
                                <p><strong>Ahorros:</strong> 47675777558</p>
                                <p>A nombre de Mar√≠a Mendoza</p>
                            </div>
                            <div class="pago-method">
                                <h4>Nequi</h4>
                                <p><strong>3105539582</strong></p>
                                <p>A nombre de Mar√≠a Mendoza</p>
                            </div>
                        </div>
                        <p class="pago-nota">Por favor env√≠anos el comprobante, ya que ser√° verificado.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Separador antes del footer -->
    <div class="separator-footer"></div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="encuentranos-box">
                        <h3>Encu√©ntranos</h3>
                        <a href="https://maps.app.goo.gl/p7pAp6E8iJCrPEjY6" target="_blank" class="ubicacion-link">
                            <p><strong>Pamplona, Norte de Santander</strong></p>
                            <p>Estamos ubicados justo frente al Hospital San Juan de Dios de Pamplona.</p>
                        </a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <div class="horarios-box">
                        <h3>Horarios de atenci√≥n</h3>
                        <p><strong>Desayunos:</strong> 7:30 AM - 9:00 AM</p>
                        <p><strong>Almuerzos:</strong> 12:00 PM - 3:00 PM</p>
                        <p><strong>Comidas R√°pidas:</strong> 5:00 PM - 9:00 PM</p>
                        <p><strong>Cafeter√≠a:</strong> 7:30 AM - 9:00 PM</p>
                        <p class="footer-lema">Un restaurante familiar con un ambiente acogedor para todos.</p>
                    </div>
                </div>
                
                <div class="footer-section">
                    <div class="contacto-box">
                        <h3>Contacto</h3>
                        <a href="https://api.whatsapp.com/send/?phone=573150118386" class="whatsapp-footer-link" target="_blank">
                            <i class="fab fa-whatsapp"></i> WhatsApp: +57 315 011 8386
                        </a>
                        <div class="social-footer-icons">
                            <a href="https://www.facebook.com/profile.php?id=61572704497545" target="_blank">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                            <a href="https://www.instagram.com/mana_coffee_pam" target="_blank">
                                <i class="fab fa-instagram"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Man√° Restobar. Todos los derechos reservados.</p>
                <a href="admin.html" class="admin-link">Acceso Admin</a>
            </div>
        </div>
    </footer>

    <!-- Contenedor para notificaciones -->
    <div id="notification-container" class="notification-container"></div>

    <!-- JavaScript SIMPLE Y FUNCIONAL -->
    <script>
    // =======================================================
    // FUNCIONES B√ÅSICAS DE NAVEGACI√ìN
    // =======================================================
    
    // Funci√≥n para mostrar una secci√≥n espec√≠fica
    function showSection(sectionId) {
        console.log('Mostrando secci√≥n:', sectionId);
        
        // Ocultar todas las secciones
        document.querySelectorAll('.section').forEach(section => {
            section.classList.remove('active');
        });
        
        // Mostrar la secci√≥n solicitada
        const targetSection = document.getElementById(sectionId);
        if (targetSection) {
            targetSection.classList.add('active');
            
            // Actualizar navegaci√≥n activa
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Encontrar y activar el enlace correspondiente
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                if (link.textContent.includes('Inicio') && sectionId === 'inicio-section') {
                    link.classList.add('active');
                } else if (link.textContent.includes('Men√∫') && sectionId === 'menu-section') {
                    link.classList.add('active');
                } else if (link.textContent.includes('Almuerzo') && sectionId === 'arma-almuerzo-section') {
                    link.classList.add('active');
                } else if (link.textContent.includes('Reservas') && sectionId === 'reservas-section') {
                    link.classList.add('active');
                }
            });
            
            // Scroll suave a la secci√≥n
            window.scrollTo({
                top: targetSection.offsetTop - 100,
                behavior: 'smooth'
            });
            
            // Cargar contenido espec√≠fico si es necesario
            if (sectionId === 'inicio-section') {
                cargarHistoria();
            }
        }
    }
    
    // =======================================================
    // CARGA DE HISTORIA
    // =======================================================
    async function cargarHistoria() {
        const historiaDiv = document.getElementById('historia-dinamica');
        if (!historiaDiv) return;
        
        try {
            const response = await fetch('/api/historia');
            
            if (response.ok) {
                const data = await response.json();
                
                if (data && data.texto) {
                    historiaDiv.innerHTML = `
                        <div class="historia-text">
                            ${data.texto.replace(/\n/g, '<br>')}
                        </div>
                    `;
                } else {
                    mostrarHistoriaPorDefecto();
                }
            } else {
                mostrarHistoriaPorDefecto();
            }
        } catch (error) {
            console.error('Error cargando historia:', error);
            mostrarHistoriaPorDefecto();
        }
    }
    
    function mostrarHistoriaPorDefecto() {
        const historiaDiv = document.getElementById('historia-dinamica');
        if (!historiaDiv) return;
        
        historiaDiv.innerHTML = `
            <div class="historia-text">
                <p>Bienvenidos a <strong>Man√° Restobar</strong>, el coraz√≥n gastron√≥mico de Pamplona, Norte de Santander.</p>
                <p>Fundado en el a√±o 2010, nuestro restaurante familiar naci√≥ con el sue√±o de ofrecer a nuestros clientes una experiencia culinaria √∫nica, donde la tradici√≥n se encuentra con la innovaci√≥n.</p>
                <p>Ubicados estrat√©gicamente frente al Hospital San Juan de Dios, nos hemos convertido en el lugar preferido tanto para los habitantes de Pamplona como para los visitantes que buscan sabores aut√©nticos en un ambiente acogedor y familiar.</p>
                <p>Nuestro nombre "Man√°" hace referencia al alimento divino que seg√∫n la tradici√≥n alimentaba a los pueblos en sus viajes. Para nosotros, cada plato que servimos es una bendici√≥n que compartimos con nuestra comunidad.</p>
                <p>Nos especializamos en comida t√≠pica colombiana con un toque gourmet, utilizando ingredientes frescos y de la m√°s alta calidad, muchos de ellos provenientes de productores locales de Norte de Santander.</p>
                <p>En Man√° Restobar, creemos que una buena comida va m√°s all√° de alimentar el cuerpo; alimenta el alma, crea momentos memorables y fortalece los lazos entre las personas.</p>
                <p>¬°Te invitamos a ser parte de nuestra historia y a disfrutar de la c√°lida hospitalidad que nos caracteriza!</p>
            </div>
        `;
    }
    
    // =======================================================
    // SISTEMA "ARMA TU ALMUERZO"
    // =======================================================
    function initAlmuerzo() {
        const optionCards = document.querySelectorAll('.option-card');
        const selectedItemsContainer = document.getElementById('selectedItems');
        const totalAmountElement = document.getElementById('totalAmount');
        const sendOrderBtn = document.getElementById('sendOrderBtn');
        const paraLlevarCheckbox = document.getElementById('paraLlevar');
        
        let selectedItems = [];
        let total = 0;
        
        // Funci√≥n para actualizar el resumen
        function updateSummary() {
            // Calcular total
            total = selectedItems.reduce((sum, item) => sum + item.price, 0);
            
            // A√±adir costo para llevar si est√° marcado
            if (paraLlevarCheckbox && paraLlevarCheckbox.checked) {
                total += 1000;
            }
            
            // Actualizar el total en la UI
            if (totalAmountElement) {
                totalAmountElement.textContent = `$${total.toLocaleString()}`;
            }
            
            // Actualizar la lista de √≠tems seleccionados
            if (selectedItems.length === 0) {
                selectedItemsContainer.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üìù</div>
                        <p class="empty-text">Selecciona los √≠tems de tu almuerzo</p>
                    </div>
                `;
                return;
            }
            
            let itemsHTML = '';
            selectedItems.forEach((item, index) => {
                itemsHTML += `
                    <div class="selected-item-card">
                        <span class="selected-item-name">${item.name}</span>
                        <span class="selected-item-price">$${item.price.toLocaleString()}</span>
                        <button class="remove-item-btn" data-index="${index}" style="
                            background: none;
                            border: none;
                            color: #e74c3c;
                            cursor: pointer;
                            font-size: 16px;
                            margin-left: 10px;
                        ">‚úï</button>
                    </div>
                `;
            });
            
            selectedItemsContainer.innerHTML = itemsHTML;
            
            // A√±adir event listeners a los botones de eliminar
            document.querySelectorAll('.remove-item-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    removeItem(index);
                });
            });
        }
        
        // Funci√≥n para a√±adir un √≠tem
        function addItem(name, price) {
            selectedItems.push({ name, price });
            updateSummary();
            showNotification(`${name} agregado al pedido`, 'success');
        }
        
        // Funci√≥n para eliminar un √≠tem
        function removeItem(index) {
            const removedItem = selectedItems.splice(index, 1)[0];
            updateSummary();
            showNotification(`${removedItem.name} eliminado del pedido`, 'info');
        }
        
        // Eventos para las tarjetas de opciones
        optionCards.forEach(card => {
            card.addEventListener('click', function() {
                const name = this.getAttribute('data-name');
                const price = parseInt(this.getAttribute('data-price'));
                
                // Efecto visual de selecci√≥n
                this.classList.add('selected');
                setTimeout(() => {
                    this.classList.remove('selected');
                }, 300);
                
                // A√±adir el √≠tem
                addItem(name, price);
            });
        });
        
        // Evento para el checkbox de "para llevar"
        if (paraLlevarCheckbox) {
            paraLlevarCheckbox.addEventListener('change', updateSummary);
        }
        
        // Evento para el bot√≥n de enviar por WhatsApp
        if (sendOrderBtn) {
            sendOrderBtn.addEventListener('click', function() {
                if (selectedItems.length === 0) {
                    showNotification('Por favor, selecciona al menos un √≠tem para tu almuerzo.', 'error');
                    return;
                }
                
                let message = `*PEDIDO - MAN√Å RESTOBAR*%0A%0A`;
                message += `*Fecha:* ${new Date().toLocaleDateString()}%0A`;
                message += `*Hora:* ${new Date().toLocaleTimeString()}%0A%0A`;
                message += `*Detalle del pedido:*%0A`;
                
                selectedItems.forEach(item => {
                    message += `‚Ä¢ ${item.name} - $${item.price.toLocaleString()}%0A`;
                });
                
                if (paraLlevarCheckbox && paraLlevarCheckbox.checked) {
                    message += `‚Ä¢ Para llevar - $1.000%0A`;
                }
                
                message += `%0A*Total: $${total.toLocaleString()}*%0A%0A`;
                message += `_Por favor, confirmar disponibilidad y tiempo de preparaci√≥n._`;
                
                const phone = '573150118386';
                const whatsappURL = `https://wa.me/${phone}?text=${message}`;
                window.open(whatsappURL, '_blank');
                
                showNotification('Redirigiendo a WhatsApp...', 'info');
                
                // Limpiar pedido despu√©s de enviar
                setTimeout(() => {
                    selectedItems = [];
                    if (paraLlevarCheckbox) paraLlevarCheckbox.checked = false;
                    updateSummary();
                }, 2000);
            });
        }
    }
    
    // =======================================================
    // SISTEMA DE RESERVAS
    // =======================================================
    function initReservas() {
        const reservaForm = document.getElementById('reservaForm');
        if (!reservaForm) return;
        
        // Establecer la fecha m√≠nima como hoy
        const fechaInput = document.getElementById('fecha');
        if (fechaInput) {
            const today = new Date().toISOString().split('T')[0];
            fechaInput.min = today;
            fechaInput.value = today;
        }
        
        // Establecer hora por defecto (12:00 PM)
        const horaInput = document.getElementById('hora');
        if (horaInput) {
            horaInput.value = '12:00';
        }
        
        // Evento para enviar el formulario
        reservaForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Obtener los valores del formulario
            const personas = document.getElementById('personas').value;
            const hora = document.getElementById('hora').value;
            const fecha = document.getElementById('fecha').value;
            const plato = document.getElementById('plato').value;
            const observaciones = document.getElementById('observaciones').value;
            
            // Validar que los campos obligatorios est√©n llenos
            if (!personas || !hora || !fecha) {
                showNotification('Por favor, complete los campos obligatorios: N√∫mero de personas, Hora y Fecha.', 'error');
                return;
            }
            
            // Formatear la fecha
            const fechaObj = new Date(fecha);
            const fechaFormateada = fechaObj.toLocaleDateString('es-ES', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            // Crear el mensaje para WhatsApp
            let message = `*RESERVA - MAN√Å RESTOBAR*%0A%0A`;
            message += `*N√∫mero de personas:* ${personas}%0A`;
            message += `*Fecha:* ${fechaFormateada}%0A`;
            message += `*Hora:* ${hora}%0A`;
            
            if (plato) {
                message += `*Plato solicitado:* ${plato}%0A`;
            }
            
            if (observaciones) {
                message += `*Observaciones:* ${observaciones}%0A`;
            }
            
            message += `%0A_Por favor, confirmar disponibilidad._`;
            
            const phone = '573150118386';
            const whatsappURL = `https://wa.me/${phone}?text=${message}`;
            window.open(whatsappURL, '_blank');
            
            showNotification('Redirigiendo a WhatsApp para confirmar reserva...', 'success');
            
            // Limpiar formulario despu√©s de enviar
            setTimeout(() => {
                reservaForm.reset();
                if (fechaInput) {
                    const today = new Date().toISOString().split('T')[0];
                    fechaInput.value = today;
                }
                if (horaInput) horaInput.value = '12:00';
            }, 1000);
        });
    }
    
    // =======================================================
    // NOTIFICACIONES
    // =======================================================
    function showNotification(message, type = 'info') {
        const container = document.getElementById('notification-container');
        if (!container) return;
        
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        notification.innerHTML = `
            <div class="notification-content">
                <i class="${getNotificationIcon(type)}"></i>
                <span>${message}</span>
            </div>
            <button onclick="this.parentElement.remove()" style="
                background: none;
                border: none;
                font-size: 20px;
                cursor: pointer;
                color: #666;
            ">&times;</button>
        `;
        
        container.appendChild(notification);
        
        // Auto-remove despu√©s de 5 segundos
        setTimeout(() => {
            if (notification.parentNode) {
                notification.remove();
            }
        }, 5000);
    }
    
    function getNotificationIcon(type) {
        switch(type) {
            case 'success': return 'fas fa-check-circle';
            case 'error': return 'fas fa-exclamation-circle';
            case 'warning': return 'fas fa-exclamation-triangle';
            case 'info': return 'fas fa-info-circle';
            default: return 'fas fa-bell';
        }
    }
    
    // =======================================================
    // INICIALIZACI√ìN CUANDO EL DOCUMENTO EST√Å LISTO
    // =======================================================
    document.addEventListener('DOMContentLoaded', function() {
        console.log('üöÄ Man√° Restobar iniciando...');
        
        // Cargar historia inicial
        cargarHistoria();
        
        // Inicializar funcionalidades
        initAlmuerzo();
        initReservas();
        
        console.log('‚úÖ Aplicaci√≥n inicializada correctamente');
    });
    
    // =======================================================
    // FUNCIONES GLOBALES
    // =======================================================
    window.showSection = showSection;
    window.cargarHistoria = cargarHistoria;
    window.showNotification = showNotification;
    </script>
</body>
</html>