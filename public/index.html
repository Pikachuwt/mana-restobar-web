<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Man√° Restobar - Pamplona</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Estilos para el PDF - SOLUCI√ìN SIMPLE */
        .pdf-container {
            width: 100%;
            max-width: 900px;
            margin: 30px auto;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            background: white;
            min-height: 600px;
        }
        
        .pdf-viewer {
            width: 100%;
            height: 700px;
            border: none;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .pdf-viewer {
                height: 500px;
            }
        }
        
        @media (max-width: 480px) {
            .pdf-viewer {
                height: 400px;
            }
        }
        
        /* Estilos adicionales */
        body {
            background-color: #f8f8f8;
            color: #333;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            font-family: 'Open Sans', sans-serif;
        }
        
        .section {
            display: none;
            padding: 40px 0;
            background: white;
            min-height: 80vh;
        }
        
        .section.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- Header con fondo borroso -->
    <header class="header" id="mainHeader">
        <div class="container">
            <div class="logo">
                <img src="images/Logo.png.jpeg" alt="Man√° Restobar" style="max-height: 60px;">
            </div>
            <nav class="nav">
                <ul>
                    <li><a href="#inicio" class="nav-link active" data-section="inicio">Inicio</a></li>
                    <li><a href="#menu" class="nav-link" data-section="menu">Men√∫</a></li>
                    <li><a href="#arma-almuerzo" class="nav-link" data-section="arma-almuerzo">Arma tu Almuerzo</a></li>
                    <li><a href="#reservas" class="nav-link" data-section="reservas">Reservas</a></li>
                </ul>
            </nav>
            <div class="social-icons">
                <a href="https://www.facebook.com/profile.php?id=61572704497545" target="_blank" class="social-icon">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="https://www.instagram.com/mana_coffee_pam" target="_blank" class="social-icon">
                    <i class="fab fa-instagram"></i>
                </a>
            </div>
        </div>
    </header>

    <!-- Contenido din√°mico -->
    <main id="content">
        <!-- Secci√≥n INICIO -->
        <section id="inicio-section" class="section active">
            <div class="hero">
                <div class="container">
                    <h1>Bienvenido a Man√° Restobar</h1>
                    <p>El coraz√≥n de Pamplona donde cada taza de caf√© y cada plato se sirve con amor familiar.</p>
                    <div class="hero-buttons">
                        <a href="#menu" class="btn nav-section-btn" data-section="menu">Ver Men√∫</a>
                        <a href="#reservas" class="btn btn-secondary nav-section-btn" data-section="reservas">Reservar Mesa</a>
                    </div>
                </div>
            </div>

            <div class="container">
                <!-- Historia -->
                <div class="historia-section">
                    <h2>Nuestra Historia</h2>
                    <div class="historia-content" id="historia-dinamica">
                     <!-- La historia se cargar√° aqu√≠ din√°micamente desde la API -->
                     <p>Cargando historia...</p>
<                       /div>
                </div>

                <div class="galeria-section">
                    <h2>Un Vistazo a Nuestro Sabor</h2>
                    <p class="subtitle">Explora la variedad y calidad que nos caracteriza en cada plato que servimos.</p>
                    
                    <div class="collage-grid">
                        <!-- Collage de im√°genes de nuestras comidas -->
                        <div class="collage-item">
                            <img src="images/comida1.jpg" alt="Plato especial del restaurante" loading="lazy" onerror="this.style.display='none'">
                        </div>
                        <div class="collage-item">
                            <img src="images/comida2.jpg" alt="Plato gourmet" loading="lazy" onerror="this.style.display='none'">
                        </div>
                        <div class="collage-item">
                            <img src="images/comida3.jpeg" alt="Especialidad de la casa" loading="lazy" onerror="this.style.display='none'">
                        </div>
                        <div class="collage-item">
                            <img src="images/comida4.jpeg" alt="Men√∫ ejecutivo" loading="lazy" onerror="this.style.display='none'">
                        </div>
                        <div class="collage-item">
                            <img src="images/comida5.jpeg" alt="Plato tradicional" loading="lazy" onerror="this.style.display='none'">
                        </div>
                        <div class="collage-item">
                            <img src="images/comida6.jpeg" alt="Especialidad culinaria" loading="lazy" onerror="this.style.display='none'">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Secci√≥n MEN√ö - VERSI√ìN CORREGIDA Y FUNCIONAL -->
        <section id="menu-section" class="section">
            <div class="container">
                <h2 class="section-title">Nuestro Men√∫</h2>
                
                <!-- Contenedor del PDF - SOLUCI√ìN SIMPLE -->
                <div class="pdf-container">
                    <iframe 
                        src="images/carta-completa.pdf.pdf" 
                        class="pdf-viewer"
                        title="Men√∫ Man√° Restobar"
                    >
                        <p style="text-align: center; padding: 40px;">
                            Tu navegador no puede mostrar el PDF. 
                            <a href="images/carta-completa.pdf.pdf" download style="color: #d4af37; font-weight: bold;">
                                Descarga el men√∫ aqu√≠
                            </a>
                        </p>
                    </iframe>
                </div>
                
                <!-- Mensaje alternativo por si el PDF no carga -->
                <div id="pdf-message" style="text-align: center; margin-top: 20px; display: none;">
                    <p style="color: #666; margin-bottom: 10px;">
                        <i class="fas fa-info-circle"></i> Si no ves el men√∫, intenta:
                    </p>
                    <a href="images/carta-completa.pdf.pdf" target="_blank" 
                       style="background: #d4af37; color: white; padding: 10px 20px; 
                              border-radius: 5px; text-decoration: none; display: inline-block;">
                        <i class="fas fa-external-link-alt"></i> Abrir en nueva pesta√±a
                    </a>
                </div>

                <div class="menu-types">
                    <div class="menu-type-card">
                        <h3>Men√∫ Ejecutivo</h3>
                        <p class="price">$15.000</p>
                        <p class="desc">Cambia todos los d√≠as</p>
                    </div>
                    <div class="menu-type-card">
                        <h3>Men√∫ Especial</h3>
                        <p class="price">$20.000</p>
                        <p class="desc">Cambia todos los d√≠as</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Secci√≥n ARMA TU ALMUERZO -->
        <section id="arma-almuerzo-section" class="section">
            <div class="container">
                <h2 class="section-title">Arma tu Almuerzo</h2>
                
                <div class="build-lunch-container-new">
                    <!-- Parte izquierda - Opciones -->
                    <div class="options-side">
                        <div class="options-grid-simple">
                            <div class="option-card" data-name="Arroz" data-price="4000">
                                <div class="option-icon">üçö</div>
                                <div class="option-details">
                                    <h3 class="option-title">Arroz</h3>
                                    <p class="option-price">$4.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Papas a la Francesa" data-price="5200">
                                <div class="option-icon">üçü</div>
                                <div class="option-details">
                                    <h3 class="option-title">Papas a la Francesa</h3>
                                    <p class="option-price">$5.200</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Carnes (Res, Cerdo o Pechuga)" data-price="8900">
                                <div class="option-icon">ü•©</div>
                                <div class="option-details">
                                    <h3 class="option-title">Carnes</h3>
                                    <p class="option-subtitle">Res, Cerdo o Pechuga</p>
                                    <p class="option-price">$8.900</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Sopa de d√≠a" data-price="5000">
                                <div class="option-icon">ü•£</div>
                                <div class="option-details">
                                    <h3 class="option-title">Sopa de d√≠a</h3>
                                    <p class="option-price">$5.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Tajadas de Maduro" data-price="3000">
                                <div class="option-icon">üçå</div>
                                <div class="option-details">
                                    <h3 class="option-title">Tajadas de Maduro</h3>
                                    <p class="option-price">$3.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Ma√≠z" data-price="3000">
                                <div class="option-icon">üåΩ</div>
                                <div class="option-details">
                                    <h3 class="option-title">Ma√≠z</h3>
                                    <p class="option-price">$3.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Tocineta" data-price="3000">
                                <div class="option-icon">ü•ì</div>
                                <div class="option-details">
                                    <h3 class="option-title">Tocineta</h3>
                                    <p class="option-price">$3.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Ensalada del d√≠a" data-price="3200">
                                <div class="option-icon">ü•ó</div>
                                <div class="option-details">
                                    <h3 class="option-title">Ensalada del d√≠a</h3>
                                    <p class="option-price">$3.200</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Huevo" data-price="3000">
                                <div class="option-icon">ü•ö</div>
                                <div class="option-details">
                                    <h3 class="option-title">Huevo</h3>
                                    <p class="option-price">$3.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Queso" data-price="3500">
                                <div class="option-icon">üßÄ</div>
                                <div class="option-details">
                                    <h3 class="option-title">Queso</h3>
                                    <p class="option-price">$3.500</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Chorizo" data-price="4000">
                                <div class="option-icon">üå≠</div>
                                <div class="option-details">
                                    <h3 class="option-title">Chorizo</h3>
                                    <p class="option-price">$4.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Salchicha" data-price="3000">
                                <div class="option-icon">üå≠</div>
                                <div class="option-details">
                                    <h3 class="option-title">Salchicha</h3>
                                    <p class="option-price">$3.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Granos del d√≠a" data-price="4000">
                                <div class="option-icon">ü´ò</div>
                                <div class="option-details">
                                    <h3 class="option-title">Granos del d√≠a</h3>
                                    <p class="option-price">$4.000</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Patacones" data-price="6500">
                                <div class="option-icon">üçå</div>
                                <div class="option-details">
                                    <h3 class="option-title">Patacones</h3>
                                    <p class="option-price">$6.500</p>
                                </div>
                            </div>
                            
                            <div class="option-card" data-name="Papas locas" data-price="9900">
                                <div class="option-icon">üçü</div>
                                <div class="option-details">
                                    <h3 class="option-title">Papas locas</h3>
                                    <p class="option-price">$9.900</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="note-box">
                            <div class="note-icon">‚ÑπÔ∏è</div>
                            <p class="note-text">Todo pedido para llevar tiene un costo adicional de $1.000</p>
                        </div>
                    </div>
                    
                    <!-- Parte derecha - Resumen -->
                    <div class="summary-side">
                        <div class="summary-card">
                            <div class="summary-header">
                                <h3 class="summary-title">Tu Pedido</h3>
                                <p class="summary-subtitle">Resumen de tu almuerzo personalizado</p>
                            </div>
                            
                            <div class="selected-items-container" id="selectedItems">
                                <div class="empty-state">
                                    <div class="empty-icon">üìù</div>
                                    <p class="empty-text">Selecciona los √≠tems de tu almuerzo</p>
                                </div>
                            </div>
                            
                            <div class="takeout-option">
                                <label class="takeout-label">
                                    <input type="checkbox" id="paraLlevar" value="1000">
                                    <span class="custom-checkbox"></span>
                                    <span class="takeout-text">Para Llevar (Costo Adicional)</span>
                                    <span class="takeout-price">+ $1.000</span>
                                </label>
                            </div>
                            
                            <div class="total-box">
                                <div class="total-content">
                                    <span class="total-label">Total:</span>
                                    <span class="total-amount" id="totalAmount">$0</span>
                                </div>
                            </div>
                            
                            <button class="btn btn-whatsapp-full" id="sendOrderBtn">
                                <i class="fab fa-whatsapp"></i> Enviar Pedido a WhatsApp
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Secci√≥n RESERVAS -->
        <section id="reservas-section" class="section">
            <div class="container">
                <h2 class="section-title">Reservas</h2>
                
                <div class="reservas-container">
                    <div class="reserva-intro">
                        <p>Asegura tu mesa en Man√° Restobar. Completa el formulario para enviarnos los detalles por WhatsApp.</p>
                    </div>
                    
                    <div class="reserva-form-card">
                        <h3>Reserva tu Mesa</h3>
                        <p class="form-subtitle">Completa tus datos y haz clic en el bot√≥n para coordinar tu reserva con nosotros.</p>
                        
                        <form id="reservaForm" class="reserva-form">
                            <div class="form-group-row">
                                <div class="form-group">
                                    <label for="personas">N√∫mero de personas</label>
                                    <input type="number" id="personas" placeholder="Ej: 4" min="1" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="hora">Hora</label>
                                    <input type="time" id="hora" required>
                                </div>
                            </div>
                            
                            <div class="form-group-row">
                                <div class="form-group">
                                    <label for="fecha">Fecha</label>
                                    <input type="date" id="fecha" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="plato">Plato (opcional)</label>
                                    <input type="text" id="plato" placeholder="Ej: Lasa√±a de vegetales">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="observaciones">Observaciones adicionales</label>
                                <textarea id="observaciones" rows="3" placeholder="Alguna solicitud especial..."></textarea>
                            </div>
                            
                            <button type="submit" class="btn btn-whatsapp-full">
                                <i class="fab fa-whatsapp"></i> Reservar por WhatsApp
                            </button>
                        </form>
                    </div>
                    
                    <div class="politicas-container">
                        <h3>Pol√≠tica de Reservas</h3>
                        <div class="politicas-list">
                            <div class="politica-item">
                                <h4>Cancelaci√≥n</h4>
                                <p>Se puede cancelar sin costo hasta 2 d√≠as antes de la fecha de la reserva.</p>
                            </div>
                            <div class="politica-item">
                                <h4>Modificaci√≥n</h4>
                                <p>Se puede modificar la reserva hasta 8 horas antes.</p>
                            </div>
                            <div class="politica-item">
                                <h4>Abono</h4>
                                <p>Para eventos o platos especiales, se podr√≠a requerir un abono del 10% o 15% (configurable).</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pagos-container">
                        <h3>Medios de Pago</h3>
                        <div class="pago-methods">
                            <div class="pago-method">
                                <h4>BANCOLOMBIA</h4>
                                <p><strong>Ahorros:</strong> 47675777558</p>
                                <p>A nombre de Mar√≠a Mendoza</p>
                            </div>
                            <div class="pago-method">
                                <h4>Nequi</h4>
                                <p><strong>3105539582</strong></p>
                                <p>A nombre de Mar√≠a Mendoza</p>
                            </div>
                        </div>
                        <p class="pago-nota">Por favor env√≠anos el comprobante, ya que ser√° verificado.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Separador antes del footer -->
    <div class="separator-footer"></div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="encuentranos-box">
                        <h3>Encu√©ntranos</h3>
                        <a href="https://maps.app.goo.gl/p7pAp6E8iJCrPEjY6" target="_blank" class="ubicacion-link">
                            <p><strong>Pamplona, Norte de Santander</strong></p>
                            <p>Estamos ubicados justo frente al Hospital San Juan de Dios de Pamplona.</p>
                        </a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <div class="horarios-box">
                        <h3>Horarios de atenci√≥n</h3>
                        <p><strong>Desayunos:</strong> 7:30 AM - 9:00 AM</p>
                        <p><strong>Almuerzos:</strong> 12:00 PM - 3:00 PM</p>
                        <p><strong>Comidas R√°pidas:</strong> 5:00 PM - 9:00 PM</p>
                        <p><strong>Cafeter√≠a:</strong> 7:30 AM - 9:00 PM</p>
                        <p class="footer-lema">Un restaurante familiar con un ambiente acogedor para todos.</p>
                    </div>
                </div>
                
                <div class="footer-section">
                    <div class="contacto-box">
                        <h3>Contacto</h3>
                        <a href="https://api.whatsapp.com/send/?phone=573150118386" class="whatsapp-footer-link" target="_blank">
                            <i class="fab fa-whatsapp"></i> WhatsApp: +57 315 011 8386
                        </a>
                        <div class="social-footer-icons">
                            <a href="https://www.facebook.com/profile.php?id=61572704497545" target="_blank">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                            <a href="https://www.instagram.com/mana_coffee_pam" target="_blank">
                                <i class="fab fa-instagram"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Man√° Restobar. Todos los derechos reservados.</p>
                <a href="admin.html" class="admin-link">Acceso Admin</a>
            </div>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // ===== Navegaci√≥n entre secciones =====
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('.section');
        
        function showSection(sectionId) {
            // Ocultar todas las secciones
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            // Remover clase activa de todos los enlaces
            navLinks.forEach(link => {
                link.classList.remove('active');
            });
            
            // Mostrar secci√≥n seleccionada
            const targetSection = document.getElementById(sectionId + '-section');
            if (targetSection) {
                targetSection.classList.add('active');
            }
            
            // Activar enlace correspondiente
            const activeLink = document.querySelector(`[data-section="${sectionId}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
            
            // Actualizar URL
            window.location.hash = sectionId;
        }
        
        // Manejar clics en enlaces de navegaci√≥n
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const sectionId = this.getAttribute('data-section');
                showSection(sectionId);
            });
        });
        
        // Manejar clics en botones que navegan a secciones
        document.querySelectorAll('.nav-section-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                const sectionId = this.getAttribute('data-section');
                showSection(sectionId);
            });
        });
        
        // Cargar secci√≥n basada en el hash de la URL
        function loadInitialSection() {
            const hash = window.location.hash.substring(1);
            if (hash && ['inicio', 'menu', 'arma-almuerzo', 'reservas'].includes(hash)) {
                showSection(hash);
            } else {
                showSection('inicio');
            }
        }
        
        loadInitialSection();
        cargarHistoria();
        
        // ===== Verificar si el PDF se carga =====
        function checkPdfLoaded() {
            const pdfIframe = document.querySelector('.pdf-viewer');
            const pdfMessage = document.getElementById('pdf-message');
            
            if (pdfIframe) {
                // Despu√©s de 3 segundos, verificar si el PDF carg√≥
                setTimeout(function() {
                    try {
                        // Intentar acceder al contenido del iframe
                        const iframeDoc = pdfIframe.contentDocument || pdfIframe.contentWindow.document;
                        
                        // Si no hay contenido o hay error, mostrar mensaje
                        if (!iframeDoc || iframeDoc.body.innerHTML.includes('404') || iframeDoc.body.innerHTML.includes('Error')) {
                            pdfMessage.style.display = 'block';
                        }
                    } catch (error) {
                        // Error de CORS, mostrar mensaje
                        pdfMessage.style.display = 'block';
                    }
                }, 3000);
            }
        }
        
        // Verificar PDF al cargar la p√°gina
        checkPdfLoaded();
        
        // ===== Sistema "Arma tu Almuerzo" =====
        const optionCards = document.querySelectorAll('.option-card');
        const selectedItemsContainer = document.getElementById('selectedItems');
        const totalAmountElement = document.getElementById('totalAmount');
        const paraLlevarCheckbox = document.getElementById('paraLlevar');
        const sendOrderBtn = document.getElementById('sendOrderBtn');
        
        let selectedItems = [];
        let total = 0;
        
        function updateTotal() {
            total = selectedItems.reduce((sum, item) => sum + item.price, 0);
            
            if (paraLlevarCheckbox.checked) {
                total += parseInt(paraLlevarCheckbox.value);
            }
            
            totalAmountElement.textContent = '$' + total.toLocaleString();
        }
        
        function updateSelectedItemsDisplay() {
            if (selectedItems.length === 0) {
                selectedItemsContainer.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üìù</div>
                        <p class="empty-text">Selecciona los √≠tems de tu almuerzo</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            selectedItems.forEach((item, index) => {
                html += `
                    <div class="selected-item">
                        <div class="selected-item-info">
                            <span class="selected-item-name">${item.name}</span>
                            <span class="selected-item-price">$${item.price.toLocaleString()}</span>
                        </div>
                        <button class="remove-item-btn" data-index="${index}">√ó</button>
                    </div>
                `;
            });
            
            selectedItemsContainer.innerHTML = html;
            
            // Agregar eventos a botones de eliminar
            document.querySelectorAll('.remove-item-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    selectedItems.splice(index, 1);
                    updateSelectedItemsDisplay();
                    updateTotal();
                });
            });
        }
        
        optionCards.forEach(card => {
            card.addEventListener('click', function() {
                const name = this.getAttribute('data-name');
                const price = parseInt(this.getAttribute('data-price'));
                
                // Agregar al carrito
                selectedItems.push({ name, price });
                
                updateSelectedItemsDisplay();
                updateTotal();
            });
        });
        
        paraLlevarCheckbox.addEventListener('change', updateTotal);
        
        sendOrderBtn.addEventListener('click', function() {
            if (selectedItems.length === 0) {
                alert('Por favor selecciona al menos un √≠tem para tu almuerzo.');
                return;
            }
            
            let message = '¬°Hola! Me gustar√≠a ordenar:\n\n';
            
            selectedItems.forEach(item => {
                message += `‚Ä¢ ${item.name} - $${item.price.toLocaleString()}\n`;
            });
            
            if (paraLlevarCheckbox.checked) {
                message += `\n‚Ä¢ Para llevar - $1.000\n`;
            }
            
            message += `\n*Total: $${total.toLocaleString()}*\n`;
            message += '\nGracias.';
            
            const phoneNumber = '573150118386';
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
            
            window.open(whatsappUrl, '_blank');
        });
        
        // ===== Funcionalidad del formulario de reservas =====
        const reservaForm = document.getElementById('reservaForm');
        
        reservaForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const personas = document.getElementById('personas').value;
            const hora = document.getElementById('hora').value;
            const fecha = document.getElementById('fecha').value;
            const plato = document.getElementById('plato').value;
            const observaciones = document.getElementById('observaciones').value;
            
            let message = '¬°Hola! Me gustar√≠a hacer una reserva:\n\n';
            message += `*N√∫mero de personas:* ${personas}\n`;
            message += `*Fecha:* ${fecha}\n`;
            message += `*Hora:* ${hora}\n`;
            
            if (plato) {
                message += `*Plato especial:* ${plato}\n`;
            }
            
            if (observaciones) {
                message += `*Observaciones:* ${observaciones}\n`;
            }
            
            message += '\nGracias.';
            
            const phoneNumber = '573150118386';
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
            
            window.open(whatsappUrl, '_blank');
        });
        
        // Establecer fecha m√≠nima para el campo de fecha (hoy)
        const fechaInput = document.getElementById('fecha');
        if (fechaInput) {
            const today = new Date().toISOString().split('T')[0];
            fechaInput.min = today;
        }
        
        // Si hay un error al cargar im√°genes, ocultarlas
        document.querySelectorAll('img').forEach(img => {
            img.onerror = function() {
                this.style.display = 'none';
            };
        });
        
        // Ajustar altura del PDF seg√∫n el dispositivo
        function adjustPdfHeight() {
            const pdfIframe = document.querySelector('.pdf-viewer');
            
            if (!pdfIframe) return;
            
            const isMobile = window.innerWidth <= 768;
            const isTablet = window.innerWidth <= 1024;
            
            if (isMobile) {
                pdfIframe.style.height = '400px';
            } else if (isTablet) {
                pdfIframe.style.height = '500px';
            } else {
                pdfIframe.style.height = '700px';
            }
        }
        
        window.addEventListener('resize', adjustPdfHeight);
        setTimeout(adjustPdfHeight, 100);
    });

// Agrega esta funci√≥n al final de tu index.html, DENTRO de la etiqueta <script>
function cargarHistoria() {
    const historiaDiv = document.getElementById('historia-dinamica');
    
    // 1. Solicitamos el texto guardado a la ruta API que creaste
    fetch('/api/historia')
        .then(res => {
            if (!res.ok) throw new Error('Error de red');
            return res.json();
        })
        .then(data => {
            // 2. Verificamos que la respuesta sea exitosa y contenga texto
            if (data.success && data.texto) {
                // Para que los saltos de l√≠nea se vean en HTML, los reemplazamos por <br>
                const textoFormateado = data.texto.replace(/\n/g, '<br>');
                historiaDiv.innerHTML = `<p>${textoFormateado}</p>`;
            } else {
                // En caso de que el dato est√© vac√≠o o la API no devuelva 'success: true'
                historiaDiv.innerHTML = '<p>A√∫n no se ha definido la historia del restaurante.</p>';
            }
        })
        .catch(error => {
            // Manejo de errores
            console.error('Error cargando la historia desde el servidor:', error);
            historiaDiv.innerHTML = '<p>Lo sentimos, hubo un error al cargar la historia.</p>';
        });
}



    </script>
     
</body>
</html>